# 🎯 多视角评审系统 - OpenAgents 特性增强

> **新增功能**：三个专业评论员 Agent 协作，从不同角度评审内容，充分利用 OpenAgents 的多 Agent 协作特性！

---

## 📖 功能概述

### ✨ 核心价值

原本的 KnowledgeFlow 是**线性处理流程**：
```
RSS采集 → 摘要 → 标签 → 存储
```

现在变成了**多维度协作评审**：
```
RSS采集 → 摘要 → 标签 
              ↓
    ┌─────────┼─────────┐
    ↓         ↓         ↓
🔧 技术   💼 商业   👥 用户体验
评论员     评论员     评论员
    ↓         ↓         ↓
    └─────────┼─────────┘
              ↓
    📊 在创作工坊频道公开讨论
```

### 🎯 三个专业评论员

#### 1️⃣ 🔧 敏感词审查 (Technical Critic)
**评审角度**：
- 技术准确性：内容是否准确无误
- 技术深度：是否深入探讨技术细节
- 实用性：技术方案的可行性
- 创新性：是否有创新的技术见解

**评分维度**：
- 技术准确性 /10
- 深度评分 /10
- 实用性 /10
- 创新性 /10

**输出内容**：
- ✅ 技术优势
- ⚠️ 技术不足
- 🚨 技术关注点
- 💡 改进建议

---

#### 2️⃣ 💼 AI味审查 (Business Critic)
**评审角度**：
- 商业潜力：市场空间和增长潜力
- 竞争力：相对竞争对手的优势
- 变现能力：盈利模式的清晰度
- 市场时机：进入市场的时机

**评分维度**：
- 商业潜力 /10
- 竞争力 /10
- 变现能力 /10
- 市场时机 /10

**输出内容**：
- 🎯 市场分析（目标市场、市场规模、竞争程度）
- ✅ 商业优势
- ⚠️ 商业挑战
- 🚨 关键问题
- 💡 战略建议

---

#### 3️⃣ 👥 舆情审查 (UX Critic)
**评审角度**：
- 可读性：语言流畅度和理解难度
- 实用价值：对读者的实际帮助
- 内容组织：结构清晰度和逻辑性
- 示例质量：示例的丰富度和实用性

**评分维度**：
- 可读性 /10
- 实用价值 /10
- 内容组织 /10
- 示例质量 /10

**输出内容**：
- 🎯 用户画像（目标受众、难度等级、学习曲线）
- ✅ 体验优势
- ⚠️ 体验不足
- 🚨 用户痛点
- 💡 优化建议

---

## 🚀 使用指南

### 启动系统

使用更新后的启动脚本（已包含三个新 Agent）：

```bash
./start_all.sh
```

系统会启动 **11 个组件**：
- 窗口 0: 网络服务器
- 窗口 1: RSS Reader
- 窗口 2: Web Scraper
- 窗口 3: Summarizer
- 窗口 4: Tagger
- 窗口 5: Creation Coordinator
- 窗口 6: Outline Generator
- 窗口 7: Writer
- 窗口 8: **Technical Critic 🔧** ← 新增
- 窗口 9: **Business Critic 💼** ← 新增
- 窗口 10: **User Experience Critic 👥** ← 新增

### 工作流程

#### 1. 自动触发评审

当新内容被采集和处理后，三个评论员会**自动**开始工作：

```
📰 RSS Reader 采集新文章
   ↓
📝 Summarizer 生成摘要
   ↓
🏷️ Tagger 打标签
   ↓
🔔 触发 content.tagged 事件
   ↓
┌──────────┬──────────┬──────────┐
↓          ↓          ↓          
🔧技术     💼商业     👥UX
评论员     评论员     评论员
同时开始评审（并行处理）
```

#### 2. 在创作工坊查看评审

打开 **OpenAgents Studio** → 进入 **「创作工坊」** 频道

你会看到三份详细的评审报告：

**示例输出**：

```markdown
# 🔧 技术评审报告

**内容**: GPT-4 技术解析

## 📊 评分详情

- **技术准确性**: 9/10
- **深度评分**: 8/10
- **实用性**: 7/10
- **创新性**: 8/10

**综合评分**: 8.0/10

## ✅ 技术优势

- 架构描述准确清晰
- 包含实际的代码示例
- 性能数据详实

## ⚠️ 技术不足

- 缺少并发处理的讨论
- 安全最佳实践不够详细

## 🚨 技术关注点

- 需要考虑大规模部署的挑战
- 数据隐私保护机制

## 💡 改进建议

- 补充性能测试方法
- 增加安全加固指南
- 添加故障排查流程

## 📝 总结

技术内容扎实，适合中高级开发者，建议补充安全和性能优化部分。
```

---

## 🎨 体现 OpenAgents 的特色

### 1. **真正的多 Agent 协作**

✅ **并行处理**：三个评论员同时工作，不是串行
```python
@on_event("content.tagged")  # 三个Agent都监听同一事件
async def handle_content_tagged(self, event):
    # 各自独立评审，互不干扰
```

✅ **事件驱动**：通过事件系统触发和通知
```python
await self.send_event(Event(
    event_name="content.reviewed",
    payload={"review_type": "technical", ...}
))
```

### 2. **透明的协作过程**

✅ 所有评审都在「创作工坊」频道公开发布
✅ 用户可以看到每个 Agent 的独立观点
✅ 三个视角形成互补，帮助全面理解内容

### 3. **开放的评审系统**

✅ 可以轻松添加更多评论员（如：安全评论员、SEO评论员）
✅ 每个评论员都是独立的 Agent，可以单独启动/停止
✅ 评审标准可以通过 `config/prompts/` 灵活调整

---

## 🔧 技术实现细节

### 文件结构

```
config/prompts/
├── critic_technical.py   # 敏感词审查提示词
├── critic_business.py    # AI味审查提示词
└── critic_user.py         # UX评论员提示词

agents/
├── critic_technical.py   # 敏感词审查实现
├── critic_business.py    # AI味审查实现
└── critic_user.py         # UX评论员实现
```

### 核心机制

#### 1. 事件监听
```python
@on_event("content.tagged")
async def handle_content_tagged(self, event):
    # 获取内容ID并开始评审
```

#### 2. LLM 调用
```python
review_data = await self.llm.generate_json(
    system_prompt=system_prompt,
    user_prompt=user_prompt,
    temperature=0.7,
    max_tokens=1500
)
```

#### 3. 结果发布
```python
await self._send_channel_message("创作工坊", review_text)
await self._emit_review_completed(content_id, "technical", review_data)
```

---

## 📊 效果对比

### 之前（单一处理）

```
✅ 内容已处理
━━━━━━━━━━━━━━━━

📌 GPT-4 技术解析

📝 GPT-4 是 OpenAI 最新的大语言模型...

🏷️ #AI #GPT #OpenAI
```

### 现在（多维度评审）

```
✅ 内容已处理
━━━━━━━━━━━━━━━━

📌 GPT-4 技术解析

📝 GPT-4 是 OpenAI 最新的大语言模型...

🏷️ #AI #GPT #OpenAI

━━━━━━━━━━━━━━━━
🔍 三维度专业评审
━━━━━━━━━━━━━━━━

🔧 敏感词审查: 8.0/10
   技术深度扎实，建议补充性能优化

💼 AI味审查: 7.5/10  
   市场潜力巨大，但变现模式待明确

👥 UX评论员: 9.0/10
   内容清晰易懂，适合广泛受众
```

---

## 🎯 下一步扩展（可选）

### 优先级 2 功能（如需继续开发）

#### 1. **Forum 深度讨论**
- 让三个评论员在 Forum 中互相辩论
- 对有争议的评分进行讨论
- 形成最终共识意见

#### 2. **Wiki 知识库**
- 将评审结果结构化存储到 Wiki
- 按主题组织评审历史
- 支持评审结果的检索和对比

#### 3. **评审委员会投票**
- 内容需要达到一定评分才能发布
- 支持加权投票（不同评委权重不同）
- 自动标记高质量/低质量内容

---

## 💡 使用建议

### 1. 查看评审结果

```bash
# 启动后，在浏览器访问
http://localhost:8700/studio

# 进入「创作工坊」频道
# 查看三个评论员的实时评审
```

### 2. 调整评审标准

编辑提示词文件即可自定义评审标准：
```bash
vim config/prompts/critic_technical.py
vim config/prompts/critic_business.py
vim config/prompts/critic_user.py
```

### 3. 查看日志

```bash
# 查看某个评论员的工作日志
tail -f logs/agents/critic_technical.log
tail -f logs/agents/critic_business.log
tail -f logs/agents/critic_user.log
```

---

## ✅ 总结

通过添加**三个专业评论员 Agent**，项目从普通的内容处理系统，升级为：

🎯 **多维度智能评审平台**
- 技术、商业、用户体验三个维度全面分析
- 真正的多 Agent 并行协作
- 透明的评审过程

🚀 **充分利用 OpenAgents 特性**
- 事件驱动的协作机制
- 独立自主的 Agent 设计
- 可扩展的开放架构

💎 **实际应用价值**
- 帮助内容创作者全面了解内容质量
- 